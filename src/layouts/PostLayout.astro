---
// src/layouts/PostLayout.astro
import BaseLayout from './BaseLayout.astro';
import { Image } from 'astro:assets';
import { formatDate } from '@/utils/date';
import { type CollectionEntry } from 'astro:content'

interface Props {
	title: string;
	pubDate: Date;
	slug: string;
	authors: CollectionEntry<'authors'>[];
	updatedDate?: Date;
	heroImage?: any;
	alt?: string;
}

const { title, pubDate, updatedDate, heroImage, alt, slug, authors } = Astro.props;
---

<BaseLayout title={title}>
	<article class="max-w-4xl mx-auto mt-8 mb-16">
		<header class="mb-8">
			<h1 class="text-4xl font-bold text-gray-900 dark:text-gray-100 mb-4">{title}</h1>
			<div class="flex items-center text-gray-600 dark:text-gray-400 gap-2">
				<time datetime={pubDate.toISOString()}>{formatDate(pubDate)}</time>
				<p class="text-gray-600 dark:text-gray-400">
					Por {
							authors.map(author => (
								author.data.name
							))
						}
      	</p>
				{updatedDate && (
					<span class="mx-2">â€¢</span>
					<time datetime={updatedDate.toISOString()}>Actualizado: {formatDate(updatedDate)}</time>
				)}
			</div>
		</header>

		{heroImage && (
			<Image
				src={heroImage}
				alt={alt || "Hero image"}
				width={1200}
				height={600}
				class="rounded-lg shadow-md mb-8"
				transition:name={`img-${slug}`}
			/>
		)}

		<div class="prose prose-lg dark:prose-invert max-w-none">
			<slot />
		</div>
	</article>
</BaseLayout>